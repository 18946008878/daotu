以下是针对**极简导游收支记录器**的完整功能总结，聚焦核心需求，突出导游业务特色：

### 一、核心定位
**10秒快速记账**，专为导游设计，解决三大核心问题：
1. 带团支出精准分类（餐/门/交/住）
2. 导游特色收入记录（车销/自费/进店）
3. 行程利润自动计算（净收入=总收入-总支出）

---

### 二、四大核心模块
#### 1. 行程管理（骨架）
| 字段       | 功能说明                  |
|------------|--------------------------|
| 团号/名称  | 必填，标识行程（G2025-北京长城） |
| 日期       | 默认当天，可修改          |
| 人数       | 游客数量（用于人均计算）  |
| 备注       | 旅行社/特殊说明           |

#### 2. 支出记录（深度优化）
| 分类   | 特色功能                              | 场景案例                  |
|--------|---------------------------------------|--------------------------|
| **餐费** | 专属表单（餐厅名+类型+日期+人数）     | 团队午餐/导游工作餐       |
| **门票** | 票型计算器（全价/学生票自动汇总）     | 故宫门票30人（20全价+10学生）|
| **交通** | 类型快捷选择（大巴/打车/公交）        | 景区接驳车费用           |
| **住宿** | 酒店名+房间数记录                     | 领队房2间               |
| **杂费** | 直接输入金额                          | 药品采购/小费           |

#### 3. 收入记录（导游业务核心）
| 类型    | 特色功能                              | 价值点                  |
|---------|---------------------------------------|------------------------|
| **车销**  | 商品库管理+分成计算                   | 自动计算净收入（扣除司机分成）|
| **自费**  | 利润自动计算（收入金额-成本金额）     | 老舍茶馆表演毛利¥500    |
| **进店**  | 佣金类型选择（人头费/销售提成）       | 玉石店提成（净收¥800）|
| 导服费  | 基础服务费记录                        | 旅行社结算             |
| 小费    | 现金/线上红包分类                     | 游客额外打赏           |

#### 4. 行程总览（利润看板）
```markdown
[ 北京长城一日游 ]
✅ 总收入：¥8,650  (车销¥2300|自费¥1500|进店¥4850)
✅ 总支出：¥4,920  (餐费¥2800|门票¥1200|交通¥920)
──────────────────
💰 净利润：¥3,730  （绿色超大字体）
❗ 待收款：¥460   （司机分成未付）
```

---

### 三、五大特色设计
1. **车销极速记录**
   - 商品库预设常卖品（矿泉水/特产/纪念品）
   - 两种模式：
     - 单品模式：选商品→输数量→自动算总价
     - 批量模式：多商品同时录入
   - 分成功能：自动计算净收入

2. **自费项目利润自动生成**
   ```markdown
   [自费项目]
   收入金额：¥2000（游客支付）
   成本金额：¥1500（给供应商）
   → 自动计算利润：¥500
   ```

3. **餐费专属表单**
   - 独立页面但单层跳转
   - 历史餐厅名称自动补全

4. **门票智能计算**
   - 票型快捷选择（全价/学生/老人）
   - 数量输入自动汇总金额

5. **离线优先架构**
   - 本地SQLite存储
   - 无网络照常使用
   - CSV一键导出备份

---

### 四、技术实现方案
| 模块         | 技术方案 (Flutter)              | 核心库/组件         |
|--------------|--------------------------------|--------------------|
| 本地存储     | SQLite数据库                   | sqflite            |
| 行程管理     | 表单+ListView                  | provider状态管理   |
| 车销模块     | GridView商品库+滑动输入        | flutter_slidable   |
| 自动计算     | Dart数学逻辑                   | -                  |
| 数据导出     | CSV文件生成                    | csv                |

---

### 五、MVP开发路线
1. **基础骨架（3天）**
   - 行程创建/列表
   - 基础收支记录（文本输入）

2. **核心模块（5天）**
   - 支出分类表单（餐费/门票特殊处理）
   - 车销商品库+分成计算
   - 自费项目利润计算

3. **增强功能（2天）**
   - 进店分成逻辑
   - CSV导出
   - 热销商品快捷入口

---

### 六、终极价值
1. **业务精准匹配**
   - 车销分成、自费利润等导游专属功能
   - 餐费/门票等复杂支出极简录入

2. **决策支持**
   - 实时掌握单团利润
   - 识别高收益商品（如烤鸭利润率＞矿泉水）

3. **效率革命**
   - 10秒完成车销记录（比手写快3倍）
   - 行程结束立见净利润，告别手工核算

> **下一步行动建议**：  
> 1. 创建Flutter项目，配置`sqflite`  
> 2. 优先开发`行程管理+车销模块`  
> 3. 用真实数据测试餐费/门票表单  
> 4. 两周内产出可测试MVP版本  

此方案完美平衡**极简操作**与**业务深度**，真正解决导游记账的核心痛点！